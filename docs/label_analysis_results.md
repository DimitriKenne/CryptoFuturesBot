### **Interpreting Your Label Analysis Results**

You've successfully run three key analyses: Label Streak Duration, MFE/MAE, and Future Returns. These provide valuable insights into the historical behavior of price following the signals generated by your specific labeling strategy.

Let's go through each analysis output:

#### **1\. Label Streak Analysis (Signal Duration)**

This analysis tells you how long a non-neutral signal (Label 1 or \-1) typically lasts consecutively before the label changes.

* **Summary Table (e.g., ADAUSDT\_5m\_label\_streak\_duration\_labeling\_table.csv)**:  
  * **Label**: Indicates the signal type (1 for Long, \-1 for Short).  
  * **Count**: The total number of distinct streaks (consecutive sequences) found for that label in the data.  
  * **Mean Duration**: The average length of a streak in bars.  
  * **Median Duration**: The middle value of streak lengths when sorted. The median is often more robust to extreme outliers than the mean.  
  * **Std Dev Duration**: Measures the variability or spread of streak lengths. A higher standard deviation means streak lengths vary more widely.  
  * **75th, 90th, 95th Percentile**: These tell you the duration below which a certain percentage of streaks fall. For example, the 90th percentile duration means 90% of streaks lasted *at most* that many bars.  
  * **Interpretation for max\_holding\_period\_bars**: Look at the **Median** and higher percentiles (like the **75th, 90th, or 95th Percentile**) for both Label 1 and Label \-1. These values give you a data-driven idea of how long your signals tend to remain "valid" according to your labeling logic.  
    * Setting your max\_holding\_period\_bars close to the median might mean you exit many trades prematurely, missing out on longer moves.  
    * Setting it too high (e.g., far beyond the 95th percentile) might mean you stay in trades long after the signal has typically ended or reversed, potentially increasing losses or tying up capital unnecessarily.  
    * A common approach is to start with a value around the **75th or 90th percentile** of the streak durations for your dominant signal type, or perhaps the maximum of the 90th percentiles for both Long and Short signals.  
* **Histogram Plot (e.g., ADAUSDT\_5m\_label\_streak\_duration\_plot\_labeling\_plot.png)**:  
  * **X-axis (Duration (bars))**: The length of the signal streak.  
  * **Y-axis (Frequency)**: How many streaks had that specific duration (or duration range, depending on the bins).  
  * **Interpretation**: The shape of the histogram visually confirms the distribution shown in the table. You can see where the majority of streaks fall and observe if there's a long tail of very long streaks. This helps you visualize the typical signal lifespan.

#### **2\. Maximum Favorable Excursion (MFE) and Maximum Adverse Excursion (MAE) Analysis**

This analysis looks at the best (MFE) and worst (MAE) price movement experienced *after* a signal is generated, within the duration that the signal remains active (until the label flips or data ends).

* **Summary Tables (e.g., ADAUSDT\_5m\_mfe\_summary\_labeling\_table.csv and ADAUSDT\_5m\_mae\_summary\_labeling\_table.csv)**:  
  * **Label**: Signal type (1 or \-1).  
  * **Count**: The number of signals analyzed for MFE/MAE.  
  * **Mean/Median MFE/MAE**: Average/median maximum favorable/adverse percentage movement.  
  * **Percentiles (75th, 90th, 95th)**: Similar to streak duration, these show the MFE/MAE value below which a certain percentage of signals fall.  
  * **Interpretation for fixed\_take\_profit\_pct**: Look at the **Median** and higher percentiles (**75th, 90th Percentile MFE**) for the corresponding label (Label 1 for long TP, Label \-1 for short TP).  
    * If you set your fixed\_take\_profit\_pct at the median MFE, roughly half your potentially profitable trades might hit it.  
    * Setting it at the 90th percentile MFE means that historically, 90% of signals experienced a favorable move *at least* up to that percentage. This can be a more ambitious, but still historically supported, target.  
    * Consider setting your fixed\_take\_profit\_pct around the **75th or 90th percentile of MFE**.  
  * **Interpretation for fixed\_stop\_loss\_pct**: Look at the **Median** and higher percentiles (**75th, 90th, 95th Percentile MAE**) for the corresponding label (Label 1 for long SL, Label \-1 for short SL).  
    * MAE tells you how much price typically moved *against* the signal before the signal ended.  
    * Setting your fixed\_stop\_loss\_pct tighter than the median MAE could mean you get stopped out frequently on moves that would have eventually become profitable (or less losing) if you had given the trade more room.  
    * Setting it wider than the 95th percentile MAE might expose you to excessive risk.  
    * Consider setting your fixed\_stop\_loss\_pct slightly wider than the **75th or 90th percentile of MAE** to avoid being stopped out by typical adverse fluctuations, but not so wide that you risk large losses.  
* **Histogram Plots (e.g., ADAUSDT\_5m\_mfe\_mae\_distribution\_plot\_labeling\_plot.png)**:  
  * **X-axis (MFE (%) / MAE (%))**: The percentage of favorable or adverse movement.  
  * **Y-axis (Frequency)**: How many signals experienced that level of MFE or MAE.  
  * **Interpretation**: These histograms show the distribution of potential profits and losses. The MFE plots (green) are typically skewed towards higher values (good\!), while the MAE plots (red) are often concentrated near zero with a tail extending to higher values (representing larger adverse moves). Visualizing these helps you understand the typical range and the likelihood of extreme moves.

#### **3\. Future Returns Analysis (Post-Signal)**

This analysis shows the distribution of percentage returns if you were to hold a position for a fixed number of bars (the specified horizons) after a signal occurs.

* **Summary Table (e.g., ADAUSDT\_5m\_future\_returns\_summary\_labeling\_table.csv)**:  
  * **Label**: Signal type (1 or \-1).  
  * **Horizon**: The fixed number of bars held after the signal.  
  * **Count**: Number of signals analyzed for that horizon.  
  * **Mean/Median Return**: Average/median percentage return after holding for the specified horizon.  
  * **Std Dev Return**: Variability of returns at that horizon.  
  * **Min/Max Return**: The worst/best historical return observed at that horizon.  
  * **25th/75th Percentile**: The values below which 25% and 75% of returns fall. The range between these is the Interquartile Range (IQR).  
  * **Interpretation**:  
    * Compare the **Median Return** across different horizons. Does the median return increase, flatten, or decrease as the horizon increases? This can help validate your max\_holding\_period\_bars choice – if median returns stop increasing or start decreasing after a certain horizon, holding longer might not be beneficial.  
    * Look at the **Percentiles (25th, 75th)** and **Min/Max** values for each horizon to understand the range and variability of outcomes. The 25th percentile for Label 1 (or 75th for Label \-1) gives you an idea of the typical downside at that horizon, which can inform your fixed\_stop\_loss\_pct. The 75th percentile for Label 1 (or 25th for Label \-1, adjusted for shorting) suggests a reasonable fixed\_take\_profit\_pct target for that holding period.  
* **Box Plot (e.g., ADAUSDT\_5m\_future\_returns\_distribution\_plot\_labeling\_plot.png)**:  
  * **X-axis (Horizon (bars))**: The different fixed holding periods you analyzed.  
  * **Y-axis (Return (%))**: The percentage return.  
  * **Interpretation**: Each box represents the distribution of returns for a specific horizon.  
    * The line inside the box is the **Median**.  
    * The box itself spans from the **25th to the 75th percentile** (the IQR).  
    * The "whiskers" extend to show the range of most of the data (typically 1.5 times the IQR from the box edges).  
    * Points beyond the whiskers are considered **outliers** (extreme returns).  
    * This plot gives you a visual summary of the typical return range and the presence of outliers for each potential holding period. You can easily compare the median performance and variability across different horizons.

### **Using the Insights to Set strategy\_config**

Based on these analyses, here's how you can start setting your strategy\_config parameters:

* **max\_holding\_period\_bars**: Consider the **Median or 75th/90th Percentile** from the **Label Streak Analysis**. Also, look at the **Future Returns Analysis** box plot – if the median return plateaus or decreases significantly after a certain horizon, that horizon could be a potential max\_holding\_period.  
* **fixed\_take\_profit\_pct**: Look at the **75th or 90th Percentile of MFE** from the **MFE/MAE Analysis** for the relevant label (Label 1 for longs, Label \-1 for shorts). You could also look at the **75th Percentile of Future Returns** for a chosen max\_holding\_period from the **Future Returns Analysis**.  
* **fixed\_stop\_loss\_pct**: Look at the **75th or 90th Percentile of MAE** from the **MFE/MAE Analysis** for the relevant label (Label 1 for longs, Label \-1 for shorts). Remember MAE is reported as a positive value representing the magnitude of the loss, so you'd set your stop loss at \-MAE\_percentile. You could also look at the **25th Percentile of Future Returns** for a chosen max\_holding\_period from the **Future Returns Analysis** (for longs; for shorts, you'd look at the 75th percentile of negative returns).

**Important Considerations:**

* These analyses provide historical insights based on your *current* labeling strategy.  
* The optimal parameters for live trading might differ and require further backtesting and optimization using your actual trading strategy logic (which involves entry, exit, and position sizing rules, not just the labels).  
* The chosen percentiles (e.g., 75th vs. 90th) involve a trade-off between frequency of hitting the target/stop and the magnitude of the target/stop. Higher percentiles for TP mean fewer trades hit TP but those that do are more profitable; higher percentiles for MAE mean wider stops, potentially reducing stop-outs but increasing loss per losing trade.

Use these results as a strong starting point for defining your strategy\_config. You can then use backtesting to test different combinations of these parameters and see how they perform on historical data.